

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GCC Backend &mdash; GHDL 0.36-dev documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GHDL 0.36-dev documentation" href="../../index.html"/>
        <link rel="up" title="Building GHDL from Sources" href="../Building.html"/>
        <link rel="next" title="GCC Backend on GNU/Linux with GCC/GNAT" href="GNULinux-GNAT.html"/>
        <link rel="prev" title="LLVM Backend on Windows with GCC/GNAT (MinGW)" href="../llvm/Windows-MinGW-GNAT.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GHDL
          

          
          </a>

          
            
            
              <div class="version">
                0.36-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../licenses.html">Copyrights | Licenses</a></li>
</ul>
<p class="caption"><span class="caption-text">GHDL usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../using/QuickStartGuide.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/InvokingGHDL.html">Invoking GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/Simulation.html">Simulation and runtime</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting GHDL</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting/Releases.html">Releases and sources</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Building.html">Building GHDL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Directories.html">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mcode/index.html">With mcode Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../llvm/index.html">With LLVM Backend</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">With GCC Backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="GNULinux-GNAT.html">GNU/Linux with GCC/GNAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="Windows-MinGW-GNAT.html">Windows with GCC/GNAT (MinGW)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../PrecompileVendorPrimitives.html">Precompile Vendor Primitives</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/CommandReference.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/CodingStyle.html">Coding Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/ImplementationOfVHDL.html">Implementation of VHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/ImplementationOfVITAL.html">Implementation of VITAL</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/Roadmap.html">Roadmap | Future Improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/Meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GHDL</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../Building.html">Building GHDL from Sources</a> &raquo;</li>
        
      <li>GCC Backend</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/building/gcc/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gcc-backend">
<span id="build-gcc"></span><h1>GCC Backend<a class="headerlink" href="#gcc-backend" title="Permalink to this headline">¶</a></h1>
<p class="rubric">Requirements</p>
<ul class="simple">
<li>GCC (Gnu Compiler Collection)</li>
<li>GNAT (Ada compiler for GCC)</li>
<li>GCC source files. Download and untar the sources of version 4.9.x, 5.x, 6.x or 7.x</li>
</ul>
<p class="rubric">Supported platforms</p>
<ul class="simple">
<li><a class="reference internal" href="GNULinux-GNAT.html"><span class="doc">GCC Backend on GNU/Linux with GCC/GNAT</span></a></li>
<li><a class="reference internal" href="Windows-MinGW-GNAT.html"><span class="doc">GCC Backend on Windows with GCC/GNAT (MinGW)</span></a></li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>Once GCC (with GHDL) has been built once, it is possible to work on the GHDL source tree without copying it in the GCC tree. Commands are:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ make ghdl1-gcc           # Build the compiler
$ make ghdl_gcc            # Build the driver
$ make libs.vhdl.local_gcc # Compile the vhdl libraries
$ make grt-all             # Build the GHDL runtime
$ make install.vpi.local   # Locally install vpi files
</pre></div>
</div>
<p>In <code class="docutils literal"><span class="pre">src/ortho/gcc</span></code>, create a <code class="docutils literal"><span class="pre">Makefile.conf</span></code> file that sets the following
variables:</p>
<div class="code Bash last highlight-default"><div class="highlight"><pre><span></span><span class="n">AGCC_GCCSRC_DIR</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">sources</span>
<span class="n">AGCC_GCCOBJ_DIR</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">build</span>
</pre></div>
</div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>For ppc64 (and AIX ?) platform, the object file format contains an identifier for the source language. Because gcc doesn’t know about the VHDL, gcc crashes very early. This could be fixed with a very simple change in <code class="docutils literal"><span class="pre">gcc/config/rs6000/rs6000.c</span></code>, <code class="docutils literal"><span class="pre">function</span> <span class="pre">rs6000_output_function_epilogue</span></code> (as of gcc 4.8):</p>
<div class="code C last highlight-default"><div class="highlight"><pre><span></span>else if (! strcmp (language_string, &quot;GNU Objective-C&quot;))
        i = 14;
else
-  gcc_unreachable ();
+  i = 0;
fprintf (file, &quot;%d,&quot;, i);

/* 8 single bit fields: global linkage (not set for C extern linkage),
</pre></div>
</div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="GNULinux-GNAT.html" class="btn btn-neutral float-right" title="GCC Backend on GNU/Linux with GCC/GNAT" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../llvm/Windows-MinGW-GNAT.html" class="btn btn-neutral" title="LLVM Backend on Windows with GCC/GNAT (MinGW)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, Tristan Gingold and contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.36-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>