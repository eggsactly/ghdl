

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start Guide &mdash; GHDL 0.36-dev documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GHDL 0.36-dev documentation" href="../index.html"/>
        <link rel="next" title="Invoking GHDL" href="InvokingGHDL.html"/>
        <link rel="prev" title="Copyrights | Licenses" href="../licenses.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GHDL
          

          
          </a>

          
            
            
              <div class="version">
                0.36-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses.html">Copyrights | Licenses</a></li>
</ul>
<p class="caption"><span class="caption-text">GHDL usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-hello-world-program">The <cite>‘Hello world’</cite> program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-heartbeat-program">The <cite>heartbeat</cite> program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-full-adder">A full adder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#starting-with-a-design">Starting with a design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="InvokingGHDL.html">Invoking GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="Simulation.html">Simulation and runtime</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting GHDL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting/Releases.html">Releases and sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building/Building.html">Building GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building/PrecompileVendorPrimitives.html">Precompile Vendor Primitives</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/CommandReference.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/CodingStyle.html">Coding Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/ImplementationOfVHDL.html">Implementation of VHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/ImplementationOfVITAL.html">Implementation of VITAL</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/Roadmap.html">Roadmap | Future Improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/Meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GHDL</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Quick Start Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/using/QuickStartGuide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start-guide">
<span id="using-quickstart"></span><h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, you will learn how to use <cite>GHDL</cite> by working on a few examples.</p>
<div class="section" id="the-hello-world-program">
<h2>The <cite>‘Hello world’</cite> program<a class="headerlink" href="#the-hello-world-program" title="Permalink to this headline">¶</a></h2>
<p>To illustrate the large purpose of <cite>VHDL</cite>, here is a commented <cite>‘Hello world’</cite> program which saved in a file named <code class="file docutils literal"><span class="pre">hello.vhdl</span></code>:</p>
<div class="highlight-VHDL"><div class="highlight"><pre><span></span><span class="c1">--  Hello world program.</span>
<span class="k">use</span> <span class="nn">std.textio.</span><span class="k">all</span><span class="p">;</span> <span class="c1">-- Imports the standard textio package.</span>

<span class="c1">--  Defines a design entity, without any ports.</span>
<span class="k">entity</span> <span class="nc">hello_world</span> <span class="k">is</span>
<span class="k">end</span> <span class="nc">hello_world</span><span class="p">;</span>

<span class="k">architecture</span> <span class="nc">behaviour</span> <span class="k">of</span> <span class="nc">hello_world</span> <span class="k">is</span>
<span class="k">begin</span>
   <span class="k">process</span>
      <span class="k">variable</span> <span class="n">l</span> <span class="o">:</span> <span class="n">line</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">write</span> <span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="kt">String</span><span class="p">&#39;(</span><span class="s">&quot;Hello world!&quot;</span><span class="p">));</span>
      <span class="n">writeline</span> <span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
      <span class="k">wait</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">process</span><span class="p">;</span>
<span class="k">end</span> <span class="nc">behaviour</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<ul class="last simple">
<li>Both <code class="docutils literal"><span class="pre">.vhdl</span></code> and <code class="docutils literal"><span class="pre">.vhd</span></code> extensions are used for VHDL source files, while <code class="docutils literal"><span class="pre">.v</span></code> is used for Verilog.</li>
<li>Unless you use especial characters, either <cite>UTF-8</cite> or <cite>ISO-8859-1</cite> encodings can be used. However, if you do, the latter should be used. The standard defines ASCII (7-bit encoding) or ISO Latin-1 (ISO-8859-1) as default. However, GHDL has a relaxing option, <a class="reference internal" href="../references/CommandReference.html#cmdoption-ghdl-mb-comments"><code class="xref std std-option docutils literal"><span class="pre">--mb-comments</span></code></a> (multi byte), to allow UTF-8 or other encodings in comments.</li>
</ul>
</div>
<ul class="simple">
<li>First, you have to compile the file; this is called <cite>analysis</cite> of a design file in <cite>VHDL</cite> terms. Run <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-a</span> <span class="pre">hello.vhdl</span></code> in the <cite>shell</cite>. This command creates or updates a file <code class="file docutils literal"><span class="pre">work-obj93.cf</span></code>, which describes the library <code class="docutils literal"><span class="pre">work</span></code>.</li>
<li>Then, run <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-e</span> <span class="pre">hello_world</span></code> in the <cite>shell</cite>. Option <a class="reference internal" href="InvokingGHDL.html#cmdoption-ghdl-e"><code class="xref std std-option docutils literal"><span class="pre">-e</span></code></a> means <em class="dfn">elaborate</em>, which is used to build a design, with the <code class="docutils literal"><span class="pre">hello_world</span></code> entity at the top of the hierarchy.</li>
<li>Last, you can directly launch the simulation running <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-r</span> <span class="pre">hello_world</span></code> in the <cite>shell</cite>. The result of the simulation will be shown on screen:</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span>Hello world!
</pre></div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>If a GCC/LLVM variant of <cite>GHDL</cite> is used:</p>
<ul class="last simple">
<li><cite>Analysis</cite> generates a file, <code class="file docutils literal"><span class="pre">hello.o</span></code>, which is the object file corresponding to your <cite>VHDL</cite> program.  This is not created with mcode.</li>
<li>The elaboration step is compulsory after the analysis and prior to launching the simulation; This wil generate an executable binary named <code class="file docutils literal"><span class="pre">hello_world</span></code>.</li>
<li>As a result, <a class="reference internal" href="InvokingGHDL.html#cmdoption-ghdl-r"><code class="xref std std-option docutils literal"><span class="pre">-r</span></code></a> is just a passthrough to the binary generated in the <cite>elaboration</cite>. Therefore, the executable can be run directly, <code class="docutils literal"><span class="pre">./hello_world</span></code>. See <a class="reference internal" href="InvokingGHDL.html#cmdoption-ghdl-r"><code class="xref std std-option docutils literal"><span class="pre">-r</span></code></a> for more informartion.</li>
</ul>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last"><a class="reference internal" href="InvokingGHDL.html#cmdoption-ghdl-e"><code class="xref std std-option docutils literal"><span class="pre">-e</span></code></a> can be bypassed with mcode, since <a class="reference internal" href="InvokingGHDL.html#cmdoption-ghdl-r"><code class="xref std std-option docutils literal"><span class="pre">-r</span></code></a> actually elaborates the design and saves it on memory before running the simulation. But you can still use it to check for some elaboration problems.</p>
</div>
</div>
<div class="section" id="the-heartbeat-program">
<h2>The <cite>heartbeat</cite> program<a class="headerlink" href="#the-heartbeat-program" title="Permalink to this headline">¶</a></h2>
<div class="highlight-VHDL"><div class="highlight"><pre><span></span><span class="k">entity</span> <span class="nc">hello_world</span> <span class="k">is</span>
  <span class="k">port</span> <span class="p">(</span> <span class="n">clk</span><span class="o">:</span> <span class="k">out</span> <span class="kt">std_logic</span><span class="p">;</span> <span class="p">)</span>
<span class="k">end</span> <span class="nc">hearbeat</span><span class="p">;</span>

<span class="k">architecture</span> <span class="nc">behaviour</span> <span class="k">of</span> <span class="nc">hello_world</span> <span class="k">is</span>
<span class="k">begin</span>
  <span class="c1">-- Clock process definition</span>
  <span class="nc">clk_process</span><span class="o">:</span> <span class="k">process</span>
  <span class="k">begin</span>
    <span class="n">clk</span> <span class="o">&lt;=</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
    <span class="k">wait</span> <span class="k">for</span> <span class="n">clk_period</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="n">clk</span> <span class="o">&lt;=</span> <span class="sc">&#39;1&#39;</span><span class="p">;</span>
    <span class="k">wait</span> <span class="k">for</span> <span class="n">clk_period</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="k">end</span> <span class="k">process</span><span class="p">;</span>
<span class="k">end</span> <span class="nc">behaviour</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="a-full-adder">
<h2>A full adder<a class="headerlink" href="#a-full-adder" title="Permalink to this headline">¶</a></h2>
<p>VHDL is generally used for hardware design.  This example starts with a <a class="reference external" href="https://en.wikipedia.org/wiki/Adder_(electronics)#Full_adder">full adder</a> described in a file named <code class="file docutils literal"><span class="pre">adder.vhdl</span></code>:</p>
<div class="highlight-VHDL"><div class="highlight"><pre><span></span><span class="k">entity</span> <span class="nc">adder</span> <span class="k">is</span>
  <span class="c1">-- `i0`, `i1` and the carry-in `ci` are inputs of the adder.</span>
  <span class="c1">-- `s` is the sum output, `co` is the carry-out.</span>
  <span class="k">port</span> <span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span> <span class="o">:</span> <span class="k">in</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">ci</span> <span class="o">:</span> <span class="k">in</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">s</span> <span class="o">:</span> <span class="k">out</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">co</span> <span class="o">:</span> <span class="k">out</span> <span class="kt">bit</span><span class="p">);</span>
<span class="k">end</span> <span class="nc">adder</span><span class="p">;</span>

<span class="k">architecture</span> <span class="nc">rtl</span> <span class="k">of</span> <span class="nc">adder</span> <span class="k">is</span>
<span class="k">begin</span>
   <span class="c1">--  This full-adder architecture contains two concurrent assignment.</span>
   <span class="c1">--  Compute the sum.</span>
   <span class="n">s</span> <span class="o">&lt;=</span> <span class="n">i0</span> <span class="k">xor</span> <span class="n">i1</span> <span class="k">xor</span> <span class="n">ci</span><span class="p">;</span>
   <span class="c1">--  Compute the carry.</span>
   <span class="n">co</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">i0</span> <span class="k">and</span> <span class="n">i1</span><span class="p">)</span> <span class="k">or</span> <span class="p">(</span><span class="n">i0</span> <span class="k">and</span> <span class="n">ci</span><span class="p">)</span> <span class="k">or</span> <span class="p">(</span><span class="n">i1</span> <span class="k">and</span> <span class="n">ci</span><span class="p">);</span>
<span class="k">end</span> <span class="nc">rtl</span><span class="p">;</span>
</pre></div>
</div>
<p>You can analyze this design file, <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-a</span> <span class="pre">adder.vhdl</span></code>, and try to execute the <cite>adder</cite> design. But this is useless, since nothing externally visible will happen. In order to check this full adder, a <em class="dfn">testbench</em> has to be run. This testbench is very simple, since the adder is also simple: it checks exhaustively all inputs.  Note that only the behaviour is tested, timing constraints are not checked. A file named <code class="file docutils literal"><span class="pre">adder_tb.vhdl</span></code> contains the testbench for the adder:</p>
<div class="highlight-VHDL"><div class="highlight"><pre><span></span><span class="c1">--  A testbench has no ports.</span>
<span class="k">entity</span> <span class="nc">adder_tb</span> <span class="k">is</span>
<span class="k">end</span> <span class="nc">adder_tb</span><span class="p">;</span>

<span class="k">architecture</span> <span class="nc">behav</span> <span class="k">of</span> <span class="nc">adder_tb</span> <span class="k">is</span>
   <span class="c1">--  Declaration of the component that will be instantiated.</span>
   <span class="k">component</span> <span class="nc">adder</span>
     <span class="k">port</span> <span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span> <span class="o">:</span> <span class="k">in</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">ci</span> <span class="o">:</span> <span class="k">in</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">s</span> <span class="o">:</span> <span class="k">out</span> <span class="kt">bit</span><span class="p">;</span> <span class="n">co</span> <span class="o">:</span> <span class="k">out</span> <span class="kt">bit</span><span class="p">);</span>
   <span class="k">end</span> <span class="k">component</span><span class="p">;</span>

   <span class="c1">--  Specifies which entity is bound with the component.</span>
   <span class="k">for</span> <span class="n">adder_0</span><span class="o">:</span> <span class="n">adder</span> <span class="k">use</span> <span class="k">entity</span> <span class="nn">work</span><span class="p">.</span><span class="n">adder</span><span class="p">;</span>
   <span class="k">signal</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">co</span> <span class="o">:</span> <span class="kt">bit</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="c1">--  Component instantiation.</span>
   <span class="n">adder_0</span><span class="o">:</span> <span class="n">adder</span> <span class="k">port</span> <span class="k">map</span> <span class="p">(</span><span class="n">i0</span> <span class="o">=&gt;</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span> <span class="o">=&gt;</span> <span class="n">i1</span><span class="p">,</span> <span class="n">ci</span> <span class="o">=&gt;</span> <span class="n">ci</span><span class="p">,</span>
                            <span class="n">s</span> <span class="o">=&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">co</span> <span class="o">=&gt;</span> <span class="n">co</span><span class="p">);</span>

   <span class="c1">--  This process does the real job.</span>
   <span class="k">process</span>
      <span class="k">type</span> <span class="n">pattern_type</span> <span class="k">is</span> <span class="k">record</span>
         <span class="c1">--  The inputs of the adder.</span>
         <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">ci</span> <span class="o">:</span> <span class="kt">bit</span><span class="p">;</span>
         <span class="c1">--  The expected outputs of the adder.</span>
         <span class="n">s</span><span class="p">,</span> <span class="n">co</span> <span class="o">:</span> <span class="kt">bit</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">record</span><span class="p">;</span>
      <span class="c1">--  The patterns to apply.</span>
      <span class="k">type</span> <span class="n">pattern_array</span> <span class="k">is</span> <span class="k">array</span> <span class="p">(</span><span class="kt">natural</span> <span class="k">range</span> <span class="o">&lt;&gt;</span><span class="p">)</span> <span class="k">of</span> <span class="n">pattern_type</span><span class="p">;</span>
      <span class="k">constant</span> <span class="n">patterns</span> <span class="o">:</span> <span class="n">pattern_array</span> <span class="o">:=</span>
        <span class="p">((</span><span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">));</span>
   <span class="k">begin</span>
      <span class="c1">--  Check each pattern.</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">patterns</span><span class="na">&#39;range</span> <span class="k">loop</span>
         <span class="c1">--  Set the inputs.</span>
         <span class="n">i0</span> <span class="o">&lt;=</span> <span class="n">patterns</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">i0</span><span class="p">;</span>
         <span class="n">i1</span> <span class="o">&lt;=</span> <span class="n">patterns</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">i1</span><span class="p">;</span>
         <span class="n">ci</span> <span class="o">&lt;=</span> <span class="n">patterns</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">ci</span><span class="p">;</span>
         <span class="c1">--  Wait for the results.</span>
         <span class="k">wait</span> <span class="k">for</span> <span class="mi">1</span> <span class="n">ns</span><span class="p">;</span>
         <span class="c1">--  Check the outputs.</span>
         <span class="k">assert</span> <span class="n">s</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">s</span>
            <span class="n">report</span> <span class="s">&quot;bad sum value&quot;</span> <span class="k">severity</span> <span class="n">error</span><span class="p">;</span>
         <span class="k">assert</span> <span class="n">co</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">co</span>
            <span class="n">report</span> <span class="s">&quot;bad carry out value&quot;</span> <span class="k">severity</span> <span class="n">error</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">loop</span><span class="p">;</span>
      <span class="k">assert</span> <span class="n">false</span> <span class="n">report</span> <span class="s">&quot;end of test&quot;</span> <span class="k">severity</span> <span class="n">note</span><span class="p">;</span>
      <span class="c1">--  Wait forever; this will finish the simulation.</span>
      <span class="k">wait</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">process</span><span class="p">;</span>
<span class="k">end</span> <span class="nc">behav</span><span class="p">;</span>
</pre></div>
</div>
<p>As usual, you should analyze the design, <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-a</span> <span class="pre">adder_tb.vhdl</span></code>.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Then, if required, elaborate the testbench: <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-e</span> <span class="pre">adder_tb</span></code>. You do not need to specify which object files are required, since GHDL knows them and automatically adds them.</p>
</div>
<p>Now, it is time to run the testbench, <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-r</span> <span class="pre">adder_tb</span></code>, and check the result on screen:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">adder_tb</span><span class="o">.</span><span class="n">vhdl</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">7</span><span class="p">:(</span><span class="n">assertion</span> <span class="n">note</span><span class="p">):</span> <span class="n">end</span> <span class="n">of</span> <span class="n">test</span>
</pre></div>
</div>
<p>If your design is rather complex, you’d like to inspect signals. Signal values can be dumped using multiple formats (see section ‘<a class="reference internal" href="Simulation.html#export-waves"><span class="std std-ref">Export waveforms</span></a>’ for more information). The resulting file can be read with a wave viewer such as <a class="reference external" href="http://gtkwave.sourceforge.net/">GtkWave</a>.</p>
<p>As explained in the <a class="reference external" href="http://gtkwave.sourceforge.net/gtkwave.pdf">manual</a>, GtkWave <em>‘relies on a post-mortem approach through the use of dumpfiles’</em>. Therefore, you should first simulate your design and dump a waveform file, say VCD: <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-r</span> <span class="pre">adder_tb</span> <span class="pre">--vcd=adder.vcd</span></code>. Then, you can view the dump: <code class="docutils literal"><span class="pre">gtkwave</span> <span class="pre">adder.vcd</span></code>.</p>
<p>See section ‘<a class="reference internal" href="Simulation.html#simulation-options"><span class="std std-ref">Simulation options</span></a>’, for more details on other runtime options.</p>
</div>
<div class="section" id="starting-with-a-design">
<h2>Starting with a design<a class="headerlink" href="#starting-with-a-design" title="Permalink to this headline">¶</a></h2>
<p>Unless you are only studying VHDL, you will work with larger designs than the ones of the previous examples. Let’s see how to analyze and run a bigger design, such as the DLX model suite written by Peter Ashenden which is distributed under the terms of the GNU General Public License. A copy is kept on <a class="reference external" href="http://ghdl.free.fr/dlx.tar.gz">ghdl.free.fr/dlx.tar.gz</a> .</p>
<ul class="simple">
<li>First, untar the sources: <code class="docutils literal"><span class="pre">tar</span> <span class="pre">zxvf</span> <span class="pre">dlx.tar.gz</span></code>.</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>In order not to pollute the sources with the library, it is a good idea to create a <code class="file docutils literal"><span class="pre">work/</span></code> subdirectory for the <cite>WORK</cite> library.  To any GHDL commands, we will add the <code class="xref std std-option docutils literal"><span class="pre">--workdir=work</span></code> option, so that all files generated by the compiler (except the executable) will be placed in this directory.</p>
<div class="last highlight-shell"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> dlx
$ mkdir work
</pre></div>
</div>
</div>
<ul class="simple">
<li>Then, we will run the <code class="docutils literal"><span class="pre">dlx_test_behaviour</span></code> design.  We need to analyze all the design units for the design hierarchy, in the correct order. GHDL provides an easy way to do this, by importing the sources, <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-i</span> <span class="pre">--workdir=work</span> <span class="pre">*.vhdl</span></code>.</li>
<li>GHDL knows all the design units of the DLX, but no one have been analyzed. Run the make option, <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-m</span> <span class="pre">--workdir=work</span> <span class="pre">dlx_test_behaviour</span></code>, which analyzes and elaborates a design. This creates many files in the <code class="file docutils literal"><span class="pre">work/</span></code> directory, and (GCC/LLVM only) the <code class="file docutils literal"><span class="pre">dlx_test_behaviour</span></code> executable in the current directory.</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">The simulation needs to have a DLX program contained in the file <code class="file docutils literal"><span class="pre">dlx.out</span></code>. This memory image will be loaded in the DLX memory. Just take one sample: <code class="docutils literal"><span class="pre">cp</span> <span class="pre">test_loop.out</span> <span class="pre">dlx.out</span></code>.</p>
</div>
<ul>
<li><p class="first">Now, you can run the test suite: <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-r</span> <span class="pre">--workdir=work</span> <span class="pre">dlx_test_behaviour</span></code>. The test bench monitors the bus and displays each instruction executed. It finishes with an assertion of severity level note:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>dlx-behaviour.vhdl:395:11:<span class="o">(</span>assertion note<span class="o">)</span>: TRAP instruction
 encountered, execution halted
</pre></div>
</div>
</li>
<li><p class="first">Last, since the clock is still running, you have to manually stop the program with the <code class="kbd docutils literal"><span class="pre">C-c</span></code> key sequence.  This behavior prevents you from running the test bench in batch mode. However, you may force the simulator to stop when an assertion above or equal a certain severity level occurs. To do so, call run with this option instead: <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">-r</span> <span class="pre">--workdir=work</span> <span class="pre">dlx_test_behaviour</span> <span class="pre">--assert-level=note`</span></code>. With this option, the program stops just after the previous message:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>dlx-behaviour.vhdl:395:11:<span class="o">(</span>assertion note<span class="o">)</span>: TRAP instruction
 encountered, execution halted
error: assertion failed
</pre></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>If you want to make room on your hard drive, you can either:</p>
<ul class="last simple">
<li>Clean the design library with the GHDL command <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">--clean</span> <span class="pre">--workdir=work</span></code>. This removes the executable and all the object files. If you want to rebuild the design at this point, just do the make command as shown above.</li>
<li>Remove the design library with the GHDL command <code class="docutils literal"><span class="pre">ghdl</span> <span class="pre">--remove</span> <span class="pre">--workdir=work</span></code>. This removes the executable, all the object files and the library file. If you want to rebuild the design, you have to import the sources again, and to make the design.</li>
<li>Remove the <code class="file docutils literal"><span class="pre">work/</span></code> directory: <code class="docutils literal"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">work</span></code>. Only the executable is kept. If you want to rebuild the design, create the <code class="file docutils literal"><span class="pre">work/</span></code> directory, import the sources, and make the design.</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Sometimes, a design does not fully follow the VHDL standards. For example it uses the badly engineered <code class="docutils literal"><span class="pre">std_logic_unsigned</span></code> package. GHDL supports this VHDL dialect through some options: <code class="docutils literal"><span class="pre">--ieee=synopsys</span> <span class="pre">-fexplicit</span></code>. See section ‘<a class="reference internal" href="InvokingGHDL.html#ieee-library-pitfalls"><span class="std std-ref">IEEE library pitfalls</span></a>’, for more details.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="InvokingGHDL.html" class="btn btn-neutral float-right" title="Invoking GHDL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../licenses.html" class="btn btn-neutral" title="Copyrights | Licenses" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, Tristan Gingold and contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.36-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>