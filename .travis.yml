branches:
  except:
    - appveyor

language: c
os: linux
sudo: required
install: true
services: docker

env:
  - THISENV="ubuntu1404_llvm35" && BUILDTHIS=
  - THISENV="ubuntu1204_llvm38" && BUILDTHIS= 
  - THISENV="fedora_mcode" && BUILDTHIS=
  - THISENV="ubuntu_mcode" && BUILDTHIS=1
  - THISENV="fedora_llvm" && BUILDTHIS=1
 
before_script:
  - DONTGRAB_SRCS=$CI
  - eval ". ./dist/linux/envs/$THISENV.sh"
  -  . ./dist/linux/travis-ci.sh

script:
  - if [ -n "$BUILDTHIS" ]; then . ./dist/linux/docker-buildtest.sh; fi
  
git:
  depth: 10
#Please note that if you use a depth of 1 and have a queue of jobs, Travis CI wonâ€™t build commits that are in the queue when you push a new commit.
  
deploy:
  overwrite: true
  provider: releases
  skip_cleanup: true
  api_key:
    secure: Pgst/qIHO6euzBssYnNTYCnd6IWHWJPolKESSvsxIDXG8V79BnCXClKMpAjBjlG/Zwx6Py6/3SWncE/dM7mFOXr/XBncAJkYBDcXat7W1c4znjm3bF4pB4R5LrFGi8jWg8mh+GdK9/zgiV+yvnM2N3cRPuZrJO4gwWs0mZUjHT42xbQOsJhC0AC2+REQtp+l/Gm3C7wZybCYfeUlnV1gLE69HtpET3w74aNVP7bAroN5u4TiA1dukLWMq+Ajw3Y24h0xXF9QlMLIb2sSSGGHuJtKiIZ81v61Sur1XsIxYU4WLT8WyOc2kQoaYIT8epQv1bOWBTPq+ID/P75I+T50q6aSSgU0E1aqz0IoJjMJgMEN1uqkNorNpCly1IlkpOk7DaohsaqodF0LG1OURmZatVq34ke6tsZSg0vq1VqGYqzrnSy6n2LuL85KmnFvUJlYunZ4vGCP0A2SHl5u/WFTwuX8fNmWuUeM07dr9y3Uztl1ixVLBTZwscgikCxJXSDdbFDEzxRAoKqSI2nc2UkYP2awmqhg44L3wtoBgzAg6hZUIqN9uRm3gO5d/mIo6nfmpJNKogIBun/ieTXcNMe4EnlxThotUirgmwb5N0BWHz5RRTwFQT15k7BgPoz/RMXOvAvaia3JFvF1sD8jZBL2fl4zWclwFKCf3ySTwRrXZG4=
  file_glob: true
  file: "$PKG_FILE"
  on:
    tags: true
    repo: 1138-4EB/ghdl
    all_branches: true
    
